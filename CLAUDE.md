# CLAUDE.md – Project Guide for tger.me

## Project Overview

Personal website & resume system built with Astro, Tailwind CSS 4, and TypeScript.
Deployed on Netlify at https://tger.me.

## Tech Stack

- **Framework:** Astro 5 (static site generation)
- **Styling:** Tailwind CSS 4 (via Vite plugin)
- **Fonts:** IBM Plex Sans (@fontsource)
- **Icons:** astro-icon + @iconify-json/tabler
- **PDF:** Playwright (headless Chromium, dev only)
- **Deploy:** Netlify (free tier)
- **CI:** GitHub Actions (PDF generation)

## Commands

```bash
npm run dev              # Start dev server
npm run build            # Build for production
npm run preview          # Preview production build

npm run new-resume -- "Position" "Company" de   # Create new application
npm run pdf              # Generate all PDFs
npm run pdf <slug>       # Generate specific PDF
npm run pdf:install      # Install Playwright Chromium (one-time setup)
```

## Resume System Architecture

### Two types of resume pages

1. **General resumes** (`/resume-de`, `/resume-en`)
   - Always show current CV data from `src/data/cv_de.ts` / `cv_en.ts`
   - Living documents that update when base data changes

2. **Application-specific resumes** (`/resume/<slug>`)
   - Frozen snapshots for specific job applications
   - Each has two files:
     - `src/content/resume/<slug>.md` – Metadata (position, company, lang, date, cvData)
     - `src/data/cv_<slug>.ts` – Frozen copy of all CV + personal data
   - Changing `cv_de.ts` does NOT affect existing snapshots

### Data flow

```
cv_de.ts / cv_en.ts          ← Base templates (general resume pages read from these)
       ↓ (copied by new-resume.sh)
cv_<slug>.ts                  ← Frozen snapshot (application-specific pages read from these)
       ↓ (referenced via frontmatter)
<slug>.md                     ← Astro content entry
       ↓ (rendered by)
[slug].astro                  ← Template
       ↓ (PDF generated by)
public/resume/<slug>.pdf      ← Static PDF file
```

### Personal data

All personal data (name, address, phone, email, birthdate, photo, tagline) lives in the
`personal` export of each CV data file. This means:
- General resume pages use `personal` from `cv_de.ts` / `cv_en.ts`
- Application snapshots use `personal` from `cv_<slug>.ts`
- The `site.ts` file is for website-level config only (not resume data)

### Creating a new application

```bash
npm run new-resume -- "Senior Berater" "Firma GmbH" de
```

This creates:
1. `src/content/resume/<slug>.md` with metadata
2. `src/data/cv_<slug>.ts` as a frozen snapshot of `cv_de.ts`

Then customize `cv_<slug>.ts` for the specific application (reorder experience,
adjust descriptions, etc.).

### PDF generation

PDFs are generated locally with Playwright and committed to git.
Netlify serves them as static files – no Playwright needed in production build.

**Local workflow:**
1. `npm run dev` → preview in browser
2. `npm run pdf <slug>` → generate PDF
3. Commit and push (PDF included)

**Remote fallback (GitHub Action):**
When resume files are pushed without a PDF, the GitHub Action automatically
generates PDFs and commits them back to the repo.

## Content Collections

- `portfolio` – Project showcase entries
- `blog` – Blog posts
- `resume` – Application-specific resumes (schema in `src/content/config.ts`)

## File Structure (Resume-related)

```
src/
├── content/
│   ├── config.ts              ← Zod schemas for content collections
│   └── resume/
│       └── <slug>.md          ← Application metadata
├── data/
│   ├── site.ts                ← Website-level config
│   ├── cv_de.ts               ← German CV base template
│   ├── cv_en.ts               ← English CV base template
│   └── cv_<slug>.ts           ← Frozen application snapshots
├── layouts/
│   └── ResumeLayout.astro     ← HTML shell for resume pages
├── pages/
│   ├── resume-de.astro        ← General German resume
│   ├── resume-en.astro        ← General English resume
│   └── resume/
│       └── [slug].astro       ← Dynamic application-specific resume
├── styles/
│   └── global.css             ← All styles incl. print CSS (@media print)
scripts/
├── new-resume.sh              ← Creates new application (MD + TS snapshot)
└── generate-pdf.mjs           ← Generates PDFs via Playwright
public/
└── resume/
    └── <slug>.pdf             ← Generated PDFs (committed to git)
.github/
└── workflows/
    └── generate-pdfs.yml      ← Auto-generates PDFs on push
```
